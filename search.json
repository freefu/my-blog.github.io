[{"title":"理解原型链","url":"https://blog.guobaoyoo.com/2018/12/17/理解原型链/","content":"<p>一段时间之后发现自己又忘了这个概念，估计是理解的不透彻，今天画下图，再记忆一下</p>\n<a id=\"more\"></a>\n<p><img src=\"http://static.guobaoyoo.com/img/blog/prototype.png\" alt=\"image\"></p>\n<p>上代码</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> Person = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> p1 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'freefu'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p1)</span><br><span class=\"line\"><span class=\"keyword\">let</span> p2 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'liulian'</span>)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p2)</span><br><span class=\"line\"><span class=\"comment\">// Person &#123;name: \"freefu\"&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// Person &#123;name: \"liulian\"&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 要给p1 p2或者更多的实例增加一个say方法</span></span><br><span class=\"line\">p1.__proto__.say = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'I can say'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">p1.say()</span><br><span class=\"line\"><span class=\"comment\">// say hi</span></span><br><span class=\"line\">p2.say()</span><br><span class=\"line\"><span class=\"comment\">// say hi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 要给p1 p2或者更多的实例增加一个walk方法</span></span><br><span class=\"line\">Person.prototype.walk = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'I can walk'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">p1.walk()</span><br><span class=\"line\"><span class=\"comment\">// I can walk</span></span><br><span class=\"line\">p2.walk()</span><br><span class=\"line\"><span class=\"comment\">// I can walk</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 要给p1 p2或者更多的实例增加一个eat方法</span></span><br><span class=\"line\"><span class=\"comment\">// 应该不会有人直接这样写</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'I can eat'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">p1.eat()</span><br><span class=\"line\"><span class=\"comment\">// I can eat</span></span><br><span class=\"line\">p2.eat()</span><br><span class=\"line\"><span class=\"comment\">// I can eat</span></span><br></pre></td></tr></table></figure>\n<p>输出p1</p>\n<p><img src=\"http://static.guobaoyoo.com/img/blog/proto-p1.png\" alt=\"image\"></p>\n<p>可以看到一开始p1的say方法，walk方法，eat方法都在哪里，是怎么样一层一层网上找的。</p>\n","categories":[],"tags":["javascript"]},{"title":"为什么我要写博客","url":"https://blog.guobaoyoo.com/2018/12/14/为什么我要写博客/","content":"<h5 id=\"其实一直都想\"><a href=\"#其实一直都想\" class=\"headerlink\" title=\"其实一直都想\"></a>其实一直都想</h5><p>14年大学毕业之后从事前端工作，打知道有博客这个东西之后就一直想要有自己的博客，但是拖拖拉拉竟然四年都过去了，其实之间也是有过一些尝试的，但不知道为什么都没有有个结果，直到前段时间和女朋友分手，就想着把以前好多想做的事情做一下，买了个人服务器，给闹闹搭建了宠物相册，备案了域名等，其实当时只是让自己忙起来忘记一些事情，当然现在还是这样。现在想做的事情也很多，包括想做宠物领养发布的小程序，闹闹的宠物相册接入node后端等等，慢慢来吧。</p>\n<a id=\"more\"></a>\n<h5 id=\"一些原因\"><a href=\"#一些原因\" class=\"headerlink\" title=\"一些原因\"></a>一些原因</h5><ul>\n<li><u><b>想让自己忙碌起来</b></u><br>有些事情很难忘记，其实也没什么好忘记的，只是偶尔独处时还是很伤感，想起以前的种种，那就找个事情做，让自己忙起来，尽量少一些时间去想，去怀念。</li>\n<li><u><b>记录一些知识，每天进步一点点</b></u><br>我其实一直都有一个想法就是让自己变得更好，包括进有利的时候，我记得是16年4月19，当时面试官问我为什么想要来这家公司，我当时就说的这句话，想让自己变得更好。当然这个变得更好不光是做人，还有做事，每天上下班在地铁上学点新东西完事可以在博客上记录一下，梳理一下。其实知识就是这样的传递的吧，大家从小在书本上学习一样的，只不过当时是记录在笔记本上，当然，要把书本上的知识消化掉转变成自己的理解，现在也是这样，知识不属于任何人，又属于任何人。</li>\n<li><u><b>记录一下自己的心情，成长</b></u><br>当做日记一样，想写点随笔可以写点，日记之类的都可以，只要坚持总会有点结果，不论是文笔的提升还是技术的上升都是好事情！</li>\n</ul>\n","categories":[],"tags":["心情"]},{"title":"有关 XSS","url":"https://blog.guobaoyoo.com/2018/12/12/有关XSS攻击/","content":"<p>记录一下<code>XSS</code>的攻击方式和防御</p>\n<h5 id=\"XSS-全称\"><a href=\"#XSS-全称\" class=\"headerlink\" title=\"XSS 全称\"></a>XSS 全称</h5><p>XSS:<br>跨站脚本<br>cross site script<br>为了避免与样式 CSS 混淆，所以简称为 XSS</p>\n<a id=\"more\"></a>\n<h5 id=\"XSS-攻击分类\"><a href=\"#XSS-攻击分类\" class=\"headerlink\" title=\"XSS 攻击分类\"></a>XSS 攻击分类</h5><h6 id=\"反射性\"><a href=\"#反射性\" class=\"headerlink\" title=\"反射性\"></a>反射性</h6><p>定义：<br>发出请求时，XSS代码出现在URL中，作为输入提交到服务器端，服务器端解析后响应，XSS代码随响应内容一起传回给浏览器，最后浏览器解析执行XSS代码。这个过程像一次反射，故叫反射性XSS</p>\n<p>示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 参数上的内容渲染到页面</span></span><br><span class=\"line\"><span class=\"comment\">// https://www.test.com/index.php?xss=hello</span></span><br><span class=\"line\"><span class=\"comment\">// 正常显示hello</span></span><br><span class=\"line\"><span class=\"comment\">// 换成XSS脚本</span></span><br><span class=\"line\"><span class=\"comment\">// https://www.test.com/index.php?xss=&lt;img src=\"null\" onerror=\"alert(1)\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// alert(1)可以换成任何攻击型代码</span></span><br></pre></td></tr></table></figure></p>\n<h6 id=\"存储型\"><a href=\"#存储型\" class=\"headerlink\" title=\"存储型\"></a>存储型</h6><p>定义：<br>存储型XSS和反射型XSS的差别仅在于，提交的代码会存储在服务器端（数据库，内存，文件系统等），下次请求目标页面时不用再次提交XSS代码</p>\n<p>示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 用户提交评论处提交以下代码</span></span><br><span class=\"line\"><span class=\"comment\">// css : body &#123;display: none&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// javascript : &lt;script&gt;alert(1)&lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"comment\">// iframe : &lt;iframe src=\"/test.html\"&gt;&lt;/iframe&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h5 id=\"防御\"><a href=\"#防御\" class=\"headerlink\" title=\"防御\"></a>防御</h5><ul>\n<li>编码：字符对应转义字符</li>\n<li>过滤：移除用户上传的DOM属性，如onerror等，移除用户上传的style节点，script节点，iframe、frame节点</li>\n<li>校正：避免直接对HTML Entity解码，使用DOM Parse转换，校正不配对的DOM标签</li>\n</ul>\n","categories":[],"tags":["javascript"]},{"title":"有关 CSRF","url":"https://blog.guobaoyoo.com/2018/12/04/有关CSRF攻击/","content":"<p>记录一下<code>CSRF</code>的攻击方式和防御</p>\n<h5 id=\"CSRF-全称\"><a href=\"#CSRF-全称\" class=\"headerlink\" title=\"CSRF 全称\"></a>CSRF 全称</h5><p>CSRF:<br>Cross-site request forgery<br>跨站请求伪造</p>\n<a id=\"more\"></a>\n<h5 id=\"攻击原理\"><a href=\"#攻击原理\" class=\"headerlink\" title=\"攻击原理\"></a>攻击原理</h5><div style=\"width: 600px; height: 500px;\"><br><img src=\"http://static.guobaoyoo.com/img/blog/CSRF.png?imageView2/0/q/75|watermark/2/text/YmxvZy5ndW9iYW95b28uY29t/font/5b6u6L2v6ZuF6buR/fontsize/400/fill/I0NDQ0NDQw==/dissolve/50/gravity/SouthEast/dx/10/dy/10\" alt=\"image\"><br></div>\n\n<ul>\n<li>用户是网站A的注册用户，登录A网站。</li>\n<li>A网站核实用户身份是否正确（账号密码验证），如果用户身份正确，则下发cookie，cookie则保存到用户的浏览器中。</li>\n<li>当保存在用户浏览器中的cookie未过期时，用户又访问网站B。</li>\n<li>网站B中有引诱用户的一个点击，这个点击可能是一个链接，这个链接则是一个访问网站API的一个接口。</li>\n<li>那么用户一点击引诱链接则发出了对网站A的API的请求，此时请求上会带着保存在用户处的cookie，网站A收到请求，对身份确认时还认为是正确合法的用户，那么就会执行收到的请求。</li>\n</ul>\n<h5 id=\"防御\"><a href=\"#防御\" class=\"headerlink\" title=\"防御\"></a>防御</h5><ul>\n<li>通过referer检测用户提交（攻击者可以修改referer值）</li>\n<li>加token验证</li>\n<li>隐藏令牌（跟第二条类似，可以加在请求头中）</li>\n</ul>\n","categories":[],"tags":["javascript"]},{"title":"理解vue生命周期","url":"https://blog.guobaoyoo.com/2018/12/03/理解vue生命周期/","content":"<p>生命周期图就不放了，官网都有的，链接地址：<a href=\"https://vuejs.org/v2/guide/instance.html#Lifecycle-Diagram\" target=\"_blank\" rel=\"noopener\">vue生命周期图</a><br>大概分为几个步骤，其实看英文都能看的出来，都是对应的，一个<code>before*</code>，一个<code>*ed</code>，<u>理解英文对应的意思能更好的理解生命周期的含义</u></p>\n<ul>\n<li><strong>beforeCreate</strong> : <strong>创建之前</strong>，刚刚new Vue()之后，数据还没有挂载呢，只有一个空壳</li>\n<li><strong>created</strong> : <strong>创建完成之后</strong>，这时候能使用并更改数据了，在这里更改数据不会触发 updated 函数</li>\n<li><strong>beforeMount</strong> : <strong>安装之前</strong>，虚拟dom已经完成，马上就要渲染，这是最后一次能修改数据了，不会触发 update 函数</li>\n<li><strong>mounted</strong> : <strong>安装完成之后</strong>，这时候真实dom已经渲染完事了，事件也已经挂载好了，可以进行一些真实的dom操作</li>\n<li><strong>beforeUpdate</strong> : <strong>更新（重新渲染）之前</strong>，重新渲染之前触发，然后重新构建虚拟dom跟之前的虚拟dom进行 diff 算法比较后重新渲染</li>\n<li><strong>updated</strong> : <strong>更新完成（重新渲染完成）之后</strong>，数据已经更改完成，dom也已经重新渲染完成</li>\n<li><strong>beforeDestroy</strong> : <strong>销毁之前</strong></li>\n<li><strong>destroy</strong> : <strong>销毁之后</strong></li>\n</ul>\n<a id=\"more\"></a>\n<p>具体的表现还有理解看代码吧。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"IE=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>vue lifeCycle<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css\"</span> <span class=\"attr\">integrity</span>=<span class=\"string\">\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\"</span></span></span><br><span class=\"line\"><span class=\"tag\">  <span class=\"attr\">crossorigin</span>=<span class=\"string\">\"anonymous\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myApp\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">my-temp</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">my-temp</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myTemp\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myP\"</span>&gt;</span>my-temp 组件<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">\"form-control\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">v-model</span>=<span class=\"string\">\"myData\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>myData: &#123;&#123; myData &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn btn-success\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"changeData\"</span>&gt;</span>changeData<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn btn-warning\"</span> @<span class=\"attr\">click</span>=<span class=\"string\">\"destroyEvent\"</span>&gt;</span>destroy<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    Vue.component(<span class=\"string\">'myTemp'</span>, &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      template: <span class=\"string\">'#myTemp'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">      data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          myData: <span class=\"string\">'hello world -- init'</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      methods: &#123;</span></span><br><span class=\"line\"><span class=\"undefined\">        changeData () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.myData = <span class=\"string\">'hello world -- changed'</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">        destroyEvent () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">this</span>.$destroy()</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      beforeCreate () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'beforeCreate: 刚刚new Vue()之后，数据还没有挂载呢，只有一个空壳'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.myData)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// undefined</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'myP'</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// null</span></span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      created () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'created: 这时候能使用并更改数据了，在这里更改数据不会触发 updated 函数'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">this</span>.myData = <span class=\"string\">'hello world -- created'</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.myData)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// hello world -- created</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'在这里可以在渲染前倒数第二次更改数据的机会，不会触发其他的钩子函数，一般可以在这里做初始数据的获取'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'接下来开始找实例或者组件对应的模板，编译模板为虚拟dom放入到render函数中准备渲染'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      beforeMount () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'beforeMount: 虚拟dom已经完成，马上就要渲染，这是最后一次能修改数据了，不会触发 update 函数'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">this</span>.myData = <span class=\"string\">'hello world -- beforeMount'</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.myData)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// hello world -- beforeMount</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'myP'</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// null</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'接下来开始render，渲染真实dom'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      mounted () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'mounted: 这时候真实dom已经渲染完事了，事件也已经挂载好了，可以进行一些真实的dom操作'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'myP'</span>))</span></span><br><span class=\"line\"><span class=\"xml\">        // <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myP\"</span>&gt;</span>A组件<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'当数据改变，进入到 beforeUpdate ，当调用销毁，进入到 beforeDestory'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      beforeUpdate () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'beforeUpdate: 重新渲染之前触发，然后重新构建虚拟dom跟之前的虚拟dom进行 diff 算法比较后重新渲染'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'!!!! 不能在此处更改数据，会陷入死循环'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      updated () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'updated: 数据已经更改完成，dom也已经重新渲染完成'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'!!!! 不能在此处更改数据，会陷入死循环'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      beforeDestroy () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'beforeDestroy: 销毁前执行'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'拆除监听，子组件，事件绑定'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;,</span></span><br><span class=\"line\"><span class=\"undefined\">      destroyed () &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'destroyed: 销毁之后触发'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">new</span> Vue(&#123;&#125;).$mount(<span class=\"string\">'#myApp'</span>)</span></span><br><span class=\"line\"><span class=\"undefined\">  </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n","categories":[],"tags":["vue"]},{"title":"慢慢喜欢你到忘记","url":"https://blog.guobaoyoo.com/2018/12/01/慢慢喜欢你到忘记/","content":"<blockquote>\n<p>“你还喜欢她对吧？”<br>“喜欢有什么用呢？”<br>“我连她今天开心还是难过都不知道。”</p>\n</blockquote>\n<audio style=\"margin: 20px auto; display: block;\" src=\"http://static.guobaoyoo.com/audio/blog/manman.mp3\" controls=\"controls\"><br>  Your browser does not support the audio tag.<br></audio>\n\n<a id=\"more\"></a>\n<center>他们说爱情故事都需要另一半</center><br><center>写着她和他的喜怒哀乐对白</center><br><center>每一次难过吵架亲吻一下就算</center><br><center>好多桥段</center><br><center>好多的告白</center><br><center>好多人心酸</center><br><center>好聚好散</center><br><center>好多页都看不完</center><br><center>刚才流了一滴泪你没看见对吗</center><br><center>不然怎么一直走不回头看呢</center><br><center>我偷偷把和你的照片标记喜欢</center><br><center>偶尔想起</center><br><center>就会看一眼</center><br><center>不让你发现</center><br><center>我的异样</center><br><center>把未来留给想象</center><br><center>慢慢喜欢你</center><br><center>慢慢的抽离</center><br><center>慢慢的想你</center><br><center>慢慢看清自己和你</center><br><center>慢慢淡出的记忆</center><br><center>慢慢把你放弃</center><br><center>慢慢喜欢你</center><br><center>慢慢的想起</center><br><center>慢慢让我找回新的意义</center><br><center>因为等待是个最好的原因</center><br><center>今天的早饭又像昨天一样忘了</center><br><center>可能不想你的时候才会记得</center><br><center>这次旅行我不得不一个人走了</center><br><center>坐什么车</center><br><center>去哪条街呢穿什么衣裳</center><br><center>会迷路吗</center><br><center>一个人逛到天亮</center><br><center>慢慢忘记你</center><br><center>慢慢的抽离</center><br><center>慢慢的适应</center><br><center>慢慢学会爱护自己</center><br><center>慢慢走完的旅行</center><br><center>慢慢告别过去</center><br><center>快要不喜欢你</center><br><center>慢慢的想起</center><br><center>慢慢的不再因为你哭泣</center><br><center>因为时间是种疗伤的药剂</center><br><center>其实情爱小说不一定要另一半</center><br><center>晚安。</center>","categories":[],"tags":["mood"]},{"title":"js判断页面滑到底部","url":"https://blog.guobaoyoo.com/2018/11/29/js判断页面滑到底部/","content":"<p>js判断页面滑到底部算是比较简单的一个功能，记录一下涉及到的知识点</p>\n<h3 id=\"实现想法\"><a href=\"#实现想法\" class=\"headerlink\" title=\"实现想法\"></a>实现想法</h3><p>功能涉及到三个长度，分别是</p>\n<ul>\n<li>屏幕的高度或者说是窗口高度，用变量<code>CH</code>代替</li>\n<li>浏览器所有内容高度，用变量<code>DH</code>代替</li>\n<li>文档发生滚动时，被卷去的高度，用变量<code>SH</code>代替</li>\n</ul>\n<a id=\"more\"></a>\n<p><img src=\"http://static.guobaoyoo.com/img/blog/scroll.png?imageView2/0/q/75|watermark/2/text/YmxvZy5ndW9iYW95b28uY29t/font/5b6u6L2v6ZuF6buR/fontsize/400/fill/I0NDQ0NDQw==/dissolve/50/gravity/SouthEast/dx/10/dy/10\" alt=\"image\"><br>怎么算页面滑到底部呢？<br>就是 屏幕或者窗口的高度 加上文档被卷去的高度 等于 浏览器所有内容高度<br>即 <code>CH + SH === DH</code><br>那么就好说了只要获取这三个值做个if判断就可以了</p>\n<h3 id=\"存在问题\"><a href=\"#存在问题\" class=\"headerlink\" title=\"存在问题\"></a>存在问题</h3><p>在不同浏览器和不同规定DTD的情况下获取这三个高度是不同的，所以为了兼容写法<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scrollBottom () &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> SH = <span class=\"built_in\">document</span>.body.scrollTop || <span class=\"built_in\">document</span>.documentElement.scrollTop</span><br><span class=\"line\">  <span class=\"keyword\">let</span> CH = <span class=\"built_in\">document</span>.documentElement.clientHeight || <span class=\"built_in\">document</span>.body.clientHeight</span><br><span class=\"line\">  <span class=\"keyword\">let</span> DH = <span class=\"built_in\">document</span>.documentElement.scrollHeight || <span class=\"built_in\">document</span>.body.scrollHeight</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (SH + CH) === DH</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","categories":[],"tags":["javascript"]},{"title":"linux环境安装nodejs","url":"https://blog.guobaoyoo.com/2018/11/28/linux环境安装nodejs/","content":"<h3 id=\"下载nodejs安装包并上传\"><a href=\"#下载nodejs安装包并上传\" class=\"headerlink\" title=\"下载nodejs安装包并上传\"></a>下载nodejs安装包并上传</h3><p>再官网选择正确的安装包下载<br><a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"noopener\">https://nodejs.org/en/download/</a><br>比如下载的包为 node-v10.14.0-linux-x64.tar.xz<br>然后用scp命令上传到服务器<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp ./node-v10.14.0-linux-x64.tar.xz root@xx.xx.xxx.xx:/app/software</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h3 id=\"解压安装包\"><a href=\"#解压安装包\" class=\"headerlink\" title=\"解压安装包\"></a>解压安装包</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xvf node-v10.14.0-linux-x64.tar.xz</span><br><span class=\"line\">tar -xvf node-v10.14.0-linux-x64 nodejs</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /app/software/nodejs/bin/npm /usr/local/bin/ </span><br><span class=\"line\">ln -s /app/software/nodejs/bin/node /usr/local/bin/</span><br></pre></td></tr></table></figure>\n<h3 id=\"检测\"><a href=\"#检测\" class=\"headerlink\" title=\"检测\"></a>检测</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br><span class=\"line\">npm -v</span><br></pre></td></tr></table></figure>\n<h3 id=\"升级node版本\"><a href=\"#升级node版本\" class=\"headerlink\" title=\"升级node版本\"></a>升级node版本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g n</span><br><span class=\"line\"></span><br><span class=\"line\">// 安装node最新版本：</span><br><span class=\"line\">n latest</span><br><span class=\"line\"></span><br><span class=\"line\">// 安装稳定版</span><br><span class=\"line\">n stable</span><br><span class=\"line\"></span><br><span class=\"line\">// 查看已安装版本</span><br><span class=\"line\">n</span><br><span class=\"line\"></span><br><span class=\"line\">// 删除指定版本</span><br><span class=\"line\">n rm 0.10.1</span><br><span class=\"line\"></span><br><span class=\"line\">// 指定某个版本运行脚本</span><br><span class=\"line\">n use 0.10.1</span><br></pre></td></tr></table></figure>","categories":[],"tags":["javascript"]},{"title":"有关audio的一些事","url":"https://blog.guobaoyoo.com/2018/11/26/audio/","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>之前有做过一些跟audio相关的工作，大多数是h5页面中引入bgm，音效，在这里总结一下之前遇见的问题和解决的办法以及一些优化用户体验的实践。</p>\n<h3 id=\"audio标签\"><a href=\"#audio标签\" class=\"headerlink\" title=\"audio标签\"></a>audio标签</h3><p>以前的项目中使用方法<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://static.guobaoyoo.com/mp3/naonao/bgm.mp3\"</span> <span class=\"attr\">autoplay</span>=<span class=\"string\">\"autoplay\"</span> <span class=\"attr\">controls</span>=<span class=\"string\">\"controls\"</span> <span class=\"attr\">loop</span>=<span class=\"string\">\"loop\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a> \n<h3 id=\"之前项目需求\"><a href=\"#之前项目需求\" class=\"headerlink\" title=\"之前项目需求\"></a>之前项目需求</h3><p>第一种：页面加载后，自动播放bgm<br>第二种：为点击添加音效</p>\n<h3 id=\"部分代码\"><a href=\"#部分代码\" class=\"headerlink\" title=\"部分代码\"></a>部分代码</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;audio src=<span class=\"string\">\"http://static.guobaoyoo.com/mp3/naonao/bgm.mp3\"</span> id=<span class=\"string\">\"myAudio\"</span> autoplay=<span class=\"string\">\"autoplay\"</span> controls=<span class=\"string\">\"controls\"</span> loop=<span class=\"string\">\"loop\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> audio = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'myAudio'</span>)</span><br><span class=\"line\">audio.currentTime = <span class=\"number\">0</span></span><br><span class=\"line\">audio.play()</span><br></pre></td></tr></table></figure>\n<h3 id=\"遇见问题以及解决办法\"><a href=\"#遇见问题以及解决办法\" class=\"headerlink\" title=\"遇见问题以及解决办法\"></a>遇见问题以及解决办法</h3><blockquote>\n<p>Note: Sites that automatically play audio (or videos with an audio track) can be an unpleasant experience for users, so should be avoided when possible. If you must offer autoplay functionality, you should make it opt-in (requiring a user to specifically enable it). However, this can be useful when creating media elements whose source will be set at a later time, under user control.  </p>\n</blockquote>\n<p>mdn上给出的note，大概意思就是尽量避免使用autoplay，如果不得不用的话，应该让用户做操作，所以产品产出调整，页面加载后触发用户一个行为后让audio加载，完事再播放就ok了，<code>但是需要让用户做出操作</code>。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;audio src=<span class=\"string\">\"http://static.guobaoyoo.com/mp3/naonao/bgm.mp3\"</span> id=<span class=\"string\">\"myAudio\"</span> autoplay=<span class=\"string\">\"autoplay\"</span> controls=<span class=\"string\">\"controls\"</span> loop=<span class=\"string\">\"loop\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">const</span> audio = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'myAudio'</span>)</span><br><span class=\"line\"><span class=\"comment\">// 在这里用户的一个行为触发，比如是个页面click事件</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.addEventListener(<span class=\"string\">'click'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  audio.load()</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>)</span><br><span class=\"line\">audio.currentTime = <span class=\"number\">0</span></span><br><span class=\"line\">audio.play()</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Web-Audio-API-AudioContext\"><a href=\"#Web-Audio-API-AudioContext\" class=\"headerlink\" title=\"Web Audio API AudioContext\"></a>Web Audio API AudioContext</h3><blockquote>\n<p>Web Audio API 提供了在Web上控制音频的一个非常有效通用的系统，允许开发者来自选音频源，对音频添加特效，使音频可视化，添加空间效果 （如平移），等等。</p>\n</blockquote>\n<p>api接口比较多，也没有一条一条具体去看，针对我想要的，引入第三方资源，然后控制播放，停止播放等等。</p>\n<p>上代码<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> AudioContext = <span class=\"built_in\">window</span>.AudioContext || <span class=\"built_in\">window</span>.webkitAudioContext</span><br><span class=\"line\"><span class=\"keyword\">let</span> audioCtx = AudioContext ? <span class=\"keyword\">new</span> AudioContext() : <span class=\"string\">''</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> bgmBuffer = &#123;</span><br><span class=\"line\">  getBuffer (link) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (audioCtx) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> request = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\">        request.open(<span class=\"string\">'GET'</span>, link, <span class=\"literal\">true</span>)</span><br><span class=\"line\">        request.responseType = <span class=\"string\">'arraybuffer'</span></span><br><span class=\"line\">        request.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          audioCtx.decodeAudioData(request.response, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">buffer</span>) </span>&#123;</span><br><span class=\"line\">            resolve(buffer)</span><br><span class=\"line\">          &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'reject'</span>)</span><br><span class=\"line\">            reject(e)</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        request.send()</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'not support AudioContext'</span>))</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  createSound (buffer) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (audioCtx.state === <span class=\"string\">'suspended'</span>) &#123;</span><br><span class=\"line\">      audioCtx.suspend().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'重启audioCtx'</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> source = audioCtx.createBufferSource()</span><br><span class=\"line\">    source.buffer = buffer</span><br><span class=\"line\">    source.connect(audioCtx.destination)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> source</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> bgmBuffer</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> Audio <span class=\"keyword\">from</span> <span class=\"string\">'@/utils/audio'</span></span><br><span class=\"line\">data () &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    transitionName: <span class=\"string\">''</span>,</span><br><span class=\"line\">    bgmBuffer: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    bgmSound: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    audioPlaying: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">computed: &#123;</span><br><span class=\"line\">  playing () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.$store.state.audioPlaying</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  getBgmSound () &#123;</span><br><span class=\"line\">    Audio.getBuffer(<span class=\"string\">'http://static.guobaoyoo.com/mp3/naonao/bgm.mp3'</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bgmBuffer = res</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bgmPlay(res)</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  bgmPlay (buffer) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.bgmSound = Audio.createSound(buffer)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.bgmSound.loop = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.bgmSound)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.bgmSound !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bgmSound.start()</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$store.commit(<span class=\"string\">'BGM_PLAY'</span>, <span class=\"literal\">true</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  bgmStop () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.bgmSound !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bgmSound.stop()</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$store.commit(<span class=\"string\">'BGM_PLAY'</span>, <span class=\"literal\">false</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  bgmControl () &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.playing)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.playing) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bgmPlay(<span class=\"keyword\">this</span>.bgmBuffer)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.bgmStop()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  created () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.getBgmSound()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"探索遗留问题\"><a href=\"#探索遗留问题\" class=\"headerlink\" title=\"探索遗留问题\"></a>探索遗留问题</h3><ul>\n<li>放到手机中还是不能自动播放</li>\n<li>不能暂停</li>\n</ul>\n","categories":[],"tags":["javascript"]},{"title":"My first blog","url":"https://blog.guobaoyoo.com/2018/11/25/markdown/","content":"<p>我的第一篇博客，记录一下markdown的常用语法</p>\n<h3 id=\"1-粗体\"><a href=\"#1-粗体\" class=\"headerlink\" title=\"1.粗体\"></a>1.粗体</h3><p>代码:<br><code>**bold**</code><br>表现:<br><strong>bold</strong></p>\n<a id=\"more\"></a>\n<h3 id=\"2-斜体\"><a href=\"#2-斜体\" class=\"headerlink\" title=\"2.斜体\"></a>2.斜体</h3><p>代码:<br><code>*italics*</code><br>表现:<br><em>italics</em></p>\n<h3 id=\"3-删除\"><a href=\"#3-删除\" class=\"headerlink\" title=\"3.删除\"></a>3.删除</h3><p>代码:<br><code>~~delete~~</code><br>表现:<br><del>delete</del></p>\n<h3 id=\"4-下划线\"><a href=\"#4-下划线\" class=\"headerlink\" title=\"4.下划线\"></a>4.下划线</h3><p>代码:<br><code>&lt;u&gt;underline&lt;/u&gt;</code><br>表现:<br><u>underline</u></p>\n<h3 id=\"5-标注mark\"><a href=\"#5-标注mark\" class=\"headerlink\" title=\"5.标注mark\"></a>5.标注mark</h3><p>代码:<br><code>==标注mark==</code><br>表现:<br>==标注mark==</p>\n<h3 id=\"6-标题\"><a href=\"#6-标题\" class=\"headerlink\" title=\"6.标题\"></a>6.标题</h3><p>代码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># h1</span><br><span class=\"line\">## h2</span><br><span class=\"line\">### h3</span><br><span class=\"line\">#### h4</span><br><span class=\"line\">##### h5</span><br><span class=\"line\">###### h6</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"7-引用\"><a href=\"#7-引用\" class=\"headerlink\" title=\"7.引用\"></a>7.引用</h3><p>代码:<br><code>&gt; quote</code><br>表现: </p>\n<blockquote>\n<p>quote</p>\n</blockquote>\n<h3 id=\"8-列表\"><a href=\"#8-列表\" class=\"headerlink\" title=\"8.列表\"></a>8.列表</h3><p>代码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- list-item</span><br><span class=\"line\">- list-item</span><br><span class=\"line\">- list-item</span><br><span class=\"line\">1. 1</span><br><span class=\"line\">2. 2</span><br><span class=\"line\">3. 3</span><br></pre></td></tr></table></figure></p>\n<p>表现: </p>\n<ul>\n<li>list-item</li>\n<li>list-item</li>\n<li>list-item</li>\n</ul>\n<ol>\n<li>1</li>\n<li>2</li>\n<li>3</li>\n</ol>\n<h3 id=\"9-超链接\"><a href=\"#9-超链接\" class=\"headerlink\" title=\"9.超链接\"></a>9.超链接</h3><p>代码:<br><code>[my-cat](http://www.guobaoyoo.com/naonao)</code><br>表现:<br><a href=\"http://www.guobaoyoo.com/naonao\" target=\"_blank\" rel=\"noopener\">my-cat</a></p>\n<h3 id=\"10-图片\"><a href=\"#10-图片\" class=\"headerlink\" title=\"10.图片\"></a>10.图片</h3><p>代码:<br><code>![image](http://static.guobaoyoo.com/img/naonao/IMG_0010.JPG)</code><br>表现:<br><img src=\"http://static.guobaoyoo.com/img/naonao/IMG_0010.JPG\" alt=\"image\"></p>\n<h3 id=\"11-代码块\"><a href=\"#11-代码块\" class=\"headerlink\" title=\"11.代码块\"></a>11.代码块</h3><p>代码:<br>```<br>  window.alert(‘hello world’)<br>```<br>表现:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window.alert(&apos;hello world&apos;)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"12-表格\"><a href=\"#12-表格\" class=\"headerlink\" title=\"12.表格\"></a>12.表格</h3><p>代码:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">header 1    | header 2</span><br><span class=\"line\">---         | ---</span><br><span class=\"line\">row 1 col 1 | row 1 col 2</span><br><span class=\"line\">row 2 col 1 | row 2 col 2</span><br></pre></td></tr></table></figure></p>\n<p>表现: </p>\n<table>\n<thead>\n<tr>\n<th>header 1</th>\n<th>header 2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>row 1 col 1</td>\n<td>row 1 col 2</td>\n</tr>\n<tr>\n<td>row 2 col 1</td>\n<td>row 2 col 2</td>\n</tr>\n</tbody>\n</table>\n","categories":[],"tags":["markdown"]}]